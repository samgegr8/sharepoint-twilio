"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = require("./utils/common");
var machineId_1 = require("./utils/machineId");
var networkId_1 = require("./utils/networkId");
var encryptor_1 = require("./utils/encryptor");
var Cpass = (function () {
    function Cpass(masterKey) {
        var _this = this;
        this.encode = function (unsecured) { return _this.encryptor.encrypt(unsecured); };
        this.decode = function (secured) { return _this.encryptor.decrypt(secured) || secured; };
        this.getMachineId = function () {
            var mId;
            try {
                mId = machineId_1.machineIdSync(false);
            }
            catch (ex) {
                mId = networkId_1.networkId(false);
            }
            return mId;
        };
        this.machineId = (typeof masterKey !== 'undefined' && masterKey !== null) ? common_1.hash(masterKey) : this.getMachineId();
        this.encryptor = new encryptor_1.Encryptor(this.machineId);
    }
    return Cpass;
}());
exports.Cpass = Cpass;
//# sourceMappingURL=Cpass.js.map